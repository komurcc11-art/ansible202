---
- hosts: redfish_apis
  connection: local
  gather_facts: false
  name: "Ansible Module for Simple Firmware Update"

  collections:
    - dellemc.openmanage

  tasks:

    - name: get default inventory information
      community.general.redfish_info:
        baseuri: "{{ baseuri }}"
        username: "{{ username }}"
        password: "{{ password }}"
      register: results

    #precheck
    - name: assert that an expected condition is true
      ansible.builtin.assert:
        that:
          - "'Chicago' in results.redfish_facts.system.entries[0][1].AssetTag"
        success_msg: "Confirmed a chicago asset"

    - name: ensure the correct model is being used
      ansible.builtin.assert:
        that:
          - results.redfish_facts.system.entries[0][1].Model == "3500"
        success_msg: "Confrimed model 3500"
        fail_msg: "This does not appear to be a model 3500. Aborting."


    






















